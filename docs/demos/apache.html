<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apache Commands - terminal-window Demo</title>
  <meta name="description" content="Interactive Apache HTTP Server command reference with simulated terminal.">
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <header class="site-header">
    <nav>
      <a href="../index.html" class="nav-brand">&lt;terminal-window&gt;</a>
      <div class="nav-links">
        <a href="../index.html">Home</a>
        <a href="../demos.html" class="active">Demos</a>
        <a href="../api.html">API</a>
        <a href="https://github.com/ProfPowell/terminal-window" target="_blank" rel="noopener">GitHub</a>
        <button class="theme-toggle" aria-label="Toggle theme">üåì</button>
      </div>
    </nav>
  </header>

  <main class="demo-layout">
    <!-- Sidebar Navigation -->
    <aside class="demo-sidebar">
      <h2>Apache Commands</h2>

      <nav class="command-nav">
        <details open>
          <summary>Service Control</summary>
          <div class="command-group">
            <p class="command-desc">Start, stop, and manage the Apache service.</p>
            <div class="command-buttons">
              <button onclick="run('sudo systemctl start apache2')">start</button>
              <button onclick="run('sudo systemctl stop apache2')">stop</button>
              <button onclick="run('sudo systemctl restart apache2')">restart</button>
              <button onclick="run('sudo systemctl reload apache2')">reload</button>
              <button onclick="run('sudo systemctl status apache2')">status</button>
              <button onclick="run('sudo systemctl enable apache2')">enable</button>
              <button onclick="run('sudo systemctl disable apache2')">disable</button>
            </div>
          </div>
        </details>

        <details>
          <summary>apachectl Commands</summary>
          <div class="command-group">
            <p class="command-desc">Apache control interface for server management.</p>
            <div class="command-buttons">
              <button onclick="run('apachectl -v')">version</button>
              <button onclick="run('apachectl -V')">compile info</button>
              <button onclick="run('apachectl -t')">test config</button>
              <button onclick="run('apachectl -S')">show vhosts</button>
              <button onclick="run('apachectl -M')">list modules</button>
              <button onclick="run('apachectl -l')">compiled mods</button>
              <button onclick="run('apachectl graceful')">graceful</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Module Management</summary>
          <div class="command-group">
            <p class="command-desc">Enable and disable Apache modules.</p>
            <div class="command-buttons">
              <button onclick="run('sudo a2enmod rewrite')">enable rewrite</button>
              <button onclick="run('sudo a2enmod ssl')">enable ssl</button>
              <button onclick="run('sudo a2enmod headers')">enable headers</button>
              <button onclick="run('sudo a2enmod proxy')">enable proxy</button>
              <button onclick="run('sudo a2dismod status')">disable status</button>
              <button onclick="run('sudo a2query -m')">list enabled</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Site Management</summary>
          <div class="command-group">
            <p class="command-desc">Manage virtual host configurations.</p>
            <div class="command-buttons">
              <button onclick="run('sudo a2ensite example.conf')">enable site</button>
              <button onclick="run('sudo a2dissite 000-default.conf')">disable default</button>
              <button onclick="run('sudo a2query -s')">list sites</button>
              <button onclick="run('ls /etc/apache2/sites-available/')">available</button>
              <button onclick="run('ls /etc/apache2/sites-enabled/')">enabled</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Configuration Files</summary>
          <div class="command-group">
            <p class="command-desc">View Apache configuration files.</p>
            <div class="command-buttons">
              <button onclick="run('cat /etc/apache2/apache2.conf')">main config</button>
              <button onclick="run('cat /etc/apache2/ports.conf')">ports.conf</button>
              <button onclick="run('cat /etc/apache2/sites-available/000-default.conf')">default vhost</button>
              <button onclick="run('cat /etc/apache2/envvars')">envvars</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Virtual Host Examples</summary>
          <div class="command-group">
            <p class="command-desc">Common virtual host configurations.</p>
            <div class="command-buttons">
              <button onclick="run('cat /etc/apache2/sites-available/example.conf')">basic vhost</button>
              <button onclick="run('cat /etc/apache2/sites-available/ssl.conf')">SSL vhost</button>
              <button onclick="run('cat /etc/apache2/sites-available/proxy.conf')">proxy vhost</button>
              <button onclick="run('cat /etc/apache2/sites-available/redirect.conf')">redirect</button>
            </div>
          </div>
        </details>

        <details>
          <summary>SSL/TLS</summary>
          <div class="command-group">
            <p class="command-desc">Configure HTTPS and certificates.</p>
            <div class="command-buttons">
              <button onclick="run('sudo a2enmod ssl')">enable SSL</button>
              <button onclick="run('sudo a2ensite default-ssl')">enable SSL site</button>
              <button onclick="run('cat /etc/apache2/sites-available/default-ssl.conf')">SSL config</button>
              <button onclick="run('openssl x509 -in server.crt -text -noout')">view cert</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Log Files</summary>
          <div class="command-group">
            <p class="command-desc">View Apache logs.</p>
            <div class="command-buttons">
              <button onclick="run('tail /var/log/apache2/error.log')">error log</button>
              <button onclick="run('tail /var/log/apache2/access.log')">access log</button>
              <button onclick="run('grep 404 /var/log/apache2/access.log')">find 404s</button>
              <button onclick="run('grep 500 /var/log/apache2/error.log')">find 500s</button>
            </div>
          </div>
        </details>

        <details>
          <summary>.htaccess Examples</summary>
          <div class="command-group">
            <p class="command-desc">Common .htaccess configurations.</p>
            <div class="command-buttons">
              <button onclick="run('cat .htaccess-redirect')">HTTPS redirect</button>
              <button onclick="run('cat .htaccess-rewrite')">URL rewrite</button>
              <button onclick="run('cat .htaccess-auth')">password protect</button>
              <button onclick="run('cat .htaccess-cache')">caching</button>
              <button onclick="run('cat .htaccess-security')">security</button>
              <button onclick="run('cat .htaccess-cors')">CORS</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Reverse Proxy</summary>
          <div class="command-group">
            <p class="command-desc">Configure Apache as a reverse proxy.</p>
            <div class="command-buttons">
              <button onclick="run('sudo a2enmod proxy')">enable proxy</button>
              <button onclick="run('sudo a2enmod proxy_http')">enable proxy_http</button>
              <button onclick="run('cat proxy-config')">proxy example</button>
              <button onclick="run('cat proxy-nodejs')">Node.js proxy</button>
              <button onclick="run('cat proxy-loadbalance')">load balancer</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Security</summary>
          <div class="command-group">
            <p class="command-desc">Security hardening for Apache.</p>
            <div class="command-buttons">
              <button onclick="run('cat security-config')">security config</button>
              <button onclick="run('cat security-headers')">security headers</button>
              <button onclick="run('cat directory-security')">directory rules</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Performance</summary>
          <div class="command-group">
            <p class="command-desc">Optimize Apache performance.</p>
            <div class="command-buttons">
              <button onclick="run('sudo a2enmod deflate')">enable compression</button>
              <button onclick="run('sudo a2enmod expires')">enable expires</button>
              <button onclick="run('cat mpm-config')">MPM config</button>
              <button onclick="run('cat keepalive-config')">KeepAlive</button>
              <button onclick="run('ab -n 1000 -c 100 http://localhost/')">benchmark</button>
            </div>
          </div>
        </details>

        <details>
          <summary>Troubleshooting</summary>
          <div class="command-group">
            <p class="command-desc">Debug Apache issues.</p>
            <div class="command-buttons">
              <button onclick="run('apachectl -t')">test config</button>
              <button onclick="run('apachectl -S')">check vhosts</button>
              <button onclick="run('netstat -tlnp | grep 80')">check port 80</button>
              <button onclick="run('curl -I http://localhost')">test headers</button>
              <button onclick="run('lsof -i :80')">what uses :80</button>
            </div>
          </div>
        </details>
      </nav>
    </aside>

    <!-- Main Content -->
    <div class="demo-content">
      <section class="demo-terminal">
        <h1>Apache HTTP Server</h1>
        <p class="demo-description">Interactive terminal for learning Apache web server commands. Click buttons in the sidebar or type commands directly.</p>

        <terminal-window
          id="terminal"
          theme="dark"
          prompt="root@server:~# "
          cursor-style="block"
          cursor-blink="true"
          welcome="Apache HTTP Server Tutorial - Type 'help' for available commands."
        ></terminal-window>
      </section>

      <section class="demo-code">
        <h2>Example Code</h2>
        <p class="demo-description">HTML and JavaScript to create this interactive Apache terminal demo.</p>

        <h3>HTML</h3>
        <code-block language="html">&lt;terminal-window
  id="terminal"
  theme="dark"
  prompt="root@server:~# "
  cursor-style="block"
  cursor-blink="true"
  welcome="Apache HTTP Server Tutorial - Type 'help' for available commands."
&gt;&lt;/terminal-window&gt;</code-block>

        <h3>JavaScript</h3>
        <code-block language="js">import { registerApacheCommands } from './commands/apache-commands.js';

const terminal = document.getElementById('terminal');

// Register all Apache commands
registerApacheCommands(terminal);

// Helper to run commands from buttons
function run(cmd) {
  terminal.executeCommand(cmd);
}</code-block>

        <h3>Custom Command Example</h3>
        <code-block language="js">// Register a custom command handler
terminal.registerCommand('sudo', (args) => {
  if (args[0] === 'systemctl' && args[2] === 'apache2') {
    const action = args[1];
    switch (action) {
      case 'start':
        return ''; // Apache started
      case 'status':
        return `‚óè apache2.service - The Apache HTTP Server
   Active: active (running)`;
      // ... more actions
    }
  }
});</code-block>
      </section>
    </div>
  </main>

  <footer class="site-footer">
    <p>&copy; 2025 Thomas A. Powell. MIT License.</p>
  </footer>

  <script type="module" src="../src/terminal-window.js"></script>
  <script type="module" src="https://cdn.jsdelivr.net/gh/ProfPowell/code-block@v2.0.1/dist/code-block.min.js"></script>
  <script type="module">
    import { registerApacheCommands } from './commands/apache-commands.js';

    const terminal = document.getElementById('terminal');
    window.run = function(cmd) { terminal.executeCommand(cmd); }

    window.addEventListener('DOMContentLoaded', async () => {
      await customElements.whenDefined('terminal-window');
      registerApacheCommands(terminal);
    });
  </script>
  <script>
    // Theme toggle
    const themeToggle = document.querySelector('.theme-toggle');
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark');
    }

    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });
  </script>
</body>
</html>
