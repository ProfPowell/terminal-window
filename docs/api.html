<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Reference - terminal-window</title>
  <meta name="description" content="Complete API documentation for the terminal-window web component.">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <nav>
      <a href="index.html" class="nav-brand">&lt;terminal-window&gt;</a>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="demos.html">Demos</a>
        <a href="api.html" class="active">API</a>
        <a href="https://github.com/ProfPowell/terminal-window" target="_blank" rel="noopener">GitHub</a>
        <button class="theme-toggle" aria-label="Toggle theme">ðŸŒ“</button>
      </div>
    </nav>
  </header>

  <main>
    <h1>API Reference</h1>
    <p class="demo-description">Complete documentation for the <code>&lt;terminal-window&gt;</code> custom element. A vanilla JavaScript web component that simulates a terminal console with customizable commands, themes, cursor styles, and typing effects.</p>

    <section id="attributes">
      <h2>Attributes</h2>
      <p>Configure the terminal using HTML attributes. All attributes can also be set via JavaScript properties.</p>

      <h3 id="appearance">Appearance</h3>
      <table class="api-table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>theme</code></td>
            <td>string</td>
            <td><code>"dark"</code></td>
            <td>Color theme: <code>"dark"</code> or <code>"light"</code></td>
          </tr>
          <tr>
            <td><code>cursor-style</code></td>
            <td>string</td>
            <td><code>"block"</code></td>
            <td>Cursor shape: <code>"block"</code>, <code>"underline"</code>, or <code>"bar"</code></td>
          </tr>
          <tr>
            <td><code>cursor-blink</code></td>
            <td>boolean</td>
            <td><code>true</code></td>
            <td>Enable cursor blinking animation</td>
          </tr>
          <tr>
            <td><code>font-family</code></td>
            <td>string</td>
            <td><code>'Consolas', 'Monaco', monospace</code></td>
            <td>Font family for terminal text</td>
          </tr>
          <tr>
            <td><code>font-size</code></td>
            <td>string</td>
            <td><code>"14px"</code></td>
            <td>Font size (e.g., "14px", "1rem")</td>
          </tr>
          <tr>
            <td><code>line-height</code></td>
            <td>number</td>
            <td><code>1.4</code></td>
            <td>Line height multiplier</td>
          </tr>
        </tbody>
      </table>

      <h3>Header</h3>
      <table class="api-table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>title</code></td>
            <td>string</td>
            <td><code>"Terminal"</code></td>
            <td>Title displayed in the header bar</td>
          </tr>
          <tr>
            <td><code>show-header</code></td>
            <td>boolean</td>
            <td><code>true</code></td>
            <td>Show the terminal header bar</td>
          </tr>
          <tr>
            <td><code>show-controls</code></td>
            <td>boolean</td>
            <td><code>true</code></td>
            <td>Show window control buttons (close, minimize, maximize)</td>
          </tr>
          <tr>
            <td><code>show-copy</code></td>
            <td>boolean</td>
            <td><code>true</code></td>
            <td>Show the copy button in the header</td>
          </tr>
          <tr>
            <td><code>show-theme-toggle</code></td>
            <td>boolean</td>
            <td><code>true</code></td>
            <td>Show the theme toggle button</td>
          </tr>
        </tbody>
      </table>

      <h3 id="behavior">Behavior</h3>
      <table class="api-table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>prompt</code></td>
            <td>string</td>
            <td><code>"$ "</code></td>
            <td>The command prompt text</td>
          </tr>
          <tr>
            <td><code>typing-effect</code></td>
            <td>boolean</td>
            <td><code>false</code></td>
            <td>Enable typewriter animation for output</td>
          </tr>
          <tr>
            <td><code>typing-speed</code></td>
            <td>number</td>
            <td><code>30</code></td>
            <td>Milliseconds per character when typing effect is enabled</td>
          </tr>
          <tr>
            <td><code>readonly</code></td>
            <td>boolean</td>
            <td><code>false</code></td>
            <td>Disable user input (presentation mode)</td>
          </tr>
          <tr>
            <td><code>max-lines</code></td>
            <td>number</td>
            <td><code>1000</code></td>
            <td>Maximum number of output lines to keep in buffer</td>
          </tr>
          <tr>
            <td><code>welcome</code></td>
            <td>string</td>
            <td>â€”</td>
            <td>Welcome message displayed when terminal loads</td>
          </tr>
          <tr>
            <td><code>enable-vfs</code></td>
            <td>boolean</td>
            <td><code>false</code></td>
            <td>Enable virtual file system with built-in commands (ls, cd, pwd, mkdir, touch, rm, cat)</td>
          </tr>
          <tr>
            <td><code>persist-history</code></td>
            <td>boolean</td>
            <td><code>false</code></td>
            <td>Persist command history to localStorage across sessions</td>
          </tr>
          <tr>
            <td><code>force-animations</code></td>
            <td>boolean</td>
            <td><code>false</code></td>
            <td>Force typing animations even when user has prefers-reduced-motion set</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>Events</h2>
      <p>Listen for these custom events to respond to terminal activity.</p>

      <table class="api-table">
        <thead>
          <tr>
            <th>Event</th>
            <th>Detail</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>command</code></td>
            <td><code>{ command, args, input }</code></td>
            <td>Fired when a command is executed</td>
          </tr>
          <tr>
            <td><code>command-result</code></td>
            <td><code>{ command, args, result }</code></td>
            <td>Fired after a command executes successfully</td>
          </tr>
          <tr>
            <td><code>command-error</code></td>
            <td><code>{ command, error }</code></td>
            <td>Fired when a command fails or is not found</td>
          </tr>
          <tr>
            <td><code>output</code></td>
            <td><code>{ type, content }</code></td>
            <td>Fired when a line is printed to the terminal</td>
          </tr>
          <tr>
            <td><code>copy</code></td>
            <td><code>{ text, mode }</code></td>
            <td>Fired when content is copied to clipboard</td>
          </tr>
          <tr>
            <td><code>close</code></td>
            <td>â€”</td>
            <td>Fired when the terminal is closed via the close button</td>
          </tr>
          <tr>
            <td><code>minimize</code></td>
            <td><code>{ minimized }</code></td>
            <td>Fired when the terminal is minimized/restored</td>
          </tr>
          <tr>
            <td><code>fullscreen</code></td>
            <td><code>{ fullscreen }</code></td>
            <td>Fired when fullscreen mode is toggled</td>
          </tr>
          <tr>
            <td><code>interrupt</code></td>
            <td>â€”</td>
            <td>Fired when user presses Ctrl+C</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2>Methods</h2>
      <p>Control the terminal programmatically using these public methods.</p>

      <table class="api-table">
        <thead>
          <tr>
            <th>Method</th>
            <th>Parameters</th>
            <th>Returns</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>registerCommand(name, handler)</code></td>
            <td><code>name: string, handler: Function</code></td>
            <td><code>void</code></td>
            <td>Register a custom command handler</td>
          </tr>
          <tr>
            <td><code>unregisterCommand(name)</code></td>
            <td><code>name: string</code></td>
            <td><code>void</code></td>
            <td>Remove a registered command</td>
          </tr>
          <tr>
            <td><code>registerAlias(alias, command)</code></td>
            <td><code>alias: string, command: string</code></td>
            <td><code>void</code></td>
            <td>Create an alias for a command</td>
          </tr>
          <tr>
            <td><code>executeCommand(command)</code></td>
            <td><code>command: string</code></td>
            <td><code>Promise&lt;void&gt;</code></td>
            <td>Execute a command programmatically</td>
          </tr>
          <tr>
            <td><code>print(text, type)</code></td>
            <td><code>text: string, type?: string</code></td>
            <td><code>Promise&lt;void&gt;</code></td>
            <td>Print text to the terminal. Type: "output", "error", "info", "success"</td>
          </tr>
          <tr>
            <td><code>updateLastLine(text)</code></td>
            <td><code>text: string</code></td>
            <td><code>boolean</code></td>
            <td>Update the last output line in place. Useful for progress bars and countdowns. Returns true if updated.</td>
          </tr>
          <tr>
            <td><code>clear()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Clear all terminal output</td>
          </tr>
          <tr>
            <td><code>setTheme(theme)</code></td>
            <td><code>theme: 'dark'|'light'</code></td>
            <td><code>void</code></td>
            <td>Set the color theme</td>
          </tr>
          <tr>
            <td><code>toggleTheme()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Toggle between light and dark theme</td>
          </tr>
          <tr>
            <td><code>setPrompt(prompt)</code></td>
            <td><code>prompt: string</code></td>
            <td><code>void</code></td>
            <td>Set the command prompt text</td>
          </tr>
          <tr>
            <td><code>setCursorStyle(style)</code></td>
            <td><code>style: 'block'|'underline'|'bar'</code></td>
            <td><code>void</code></td>
            <td>Set the cursor style</td>
          </tr>
          <tr>
            <td><code>setCursorBlink(blink)</code></td>
            <td><code>blink: boolean</code></td>
            <td><code>void</code></td>
            <td>Enable or disable cursor blinking</td>
          </tr>
          <tr>
            <td><code>setTypingEffect(enabled, speed)</code></td>
            <td><code>enabled: boolean, speed?: number</code></td>
            <td><code>void</code></td>
            <td>Enable or disable typing effect. Speed in ms per character.</td>
          </tr>
          <tr>
            <td><code>skipTypingEffect()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Skip the current typing animation and show all remaining output immediately</td>
          </tr>
          <tr>
            <td><code>setForceAnimations(force)</code></td>
            <td><code>force: boolean</code></td>
            <td><code>void</code></td>
            <td>Force animations to run even when user has prefers-reduced-motion enabled</td>
          </tr>
          <tr>
            <td><code>hasReducedMotion()</code></td>
            <td>â€”</td>
            <td><code>boolean</code></td>
            <td>Check if user has prefers-reduced-motion enabled in system settings</td>
          </tr>
          <tr>
            <td><code>setReadonly(readonly)</code></td>
            <td><code>readonly: boolean</code></td>
            <td><code>void</code></td>
            <td>Enable or disable readonly mode</td>
          </tr>
          <tr>
            <td><code>setInputMask(masked)</code></td>
            <td><code>masked: boolean</code></td>
            <td><code>void</code></td>
            <td>Enable or disable input masking for password prompts</td>
          </tr>
          <tr>
            <td><code>getHistory()</code></td>
            <td>â€”</td>
            <td><code>string[]</code></td>
            <td>Get the command history array</td>
          </tr>
          <tr>
            <td><code>setHistory(history)</code></td>
            <td><code>history: string[]</code></td>
            <td><code>void</code></td>
            <td>Replace the command history</td>
          </tr>
          <tr>
            <td><code>clearHistory()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Clear all command history</td>
          </tr>
          <tr>
            <td><code>getContent()</code></td>
            <td>â€”</td>
            <td><code>string</code></td>
            <td>Get all terminal output as plain text</td>
          </tr>
          <tr>
            <td><code>copyContent(mode)</code></td>
            <td><code>mode: 'all'|'commands'|'output'</code></td>
            <td><code>Promise&lt;void&gt;</code></td>
            <td>Copy terminal content to clipboard</td>
          </tr>
          <tr>
            <td><code>focus()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Focus the terminal's input field</td>
          </tr>
          <tr>
            <td><code>scrollToBottom()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Scroll to the bottom of the terminal</td>
          </tr>
          <tr>
            <td><code>close()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Close the terminal by hiding it</td>
          </tr>
          <tr>
            <td><code>minimize()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Toggle the minimized state</td>
          </tr>
          <tr>
            <td><code>toggleFullscreen()</code></td>
            <td>â€”</td>
            <td><code>void</code></td>
            <td>Toggle fullscreen mode</td>
          </tr>
        </tbody>
      </table>

      <h3>registerCommand() Example</h3>
      <code-block language="js">// Simple command
terminal.registerCommand('hello', () => 'Hello, World!');

// Command with arguments
terminal.registerCommand('greet', (args) => `Hello, ${args[0] || 'stranger'}!`);

// Async command
terminal.registerCommand('fetch-data', async () => {
  const response = await fetch('/api/data');
  return await response.text();
});</code-block>

      <h3>registerAlias() Example</h3>
      <code-block language="js">terminal.registerAlias('ll', 'ls -la');
terminal.registerAlias('cls', 'clear');</code-block>

      <h3>updateLastLine() Example</h3>
      <code-block language="js">// Progress bar that updates in place
terminal.registerCommand('download', async () => {
  terminal.print('[                    ] 0%');

  for (let i = 0; i <= 100; i += 5) {
    await new Promise(r => setTimeout(r, 100));
    const filled = Math.round(i / 5);
    const bar = 'â–ˆ'.repeat(filled) + ' '.repeat(20 - filled);
    terminal.updateLastLine(`[${bar}] ${i}%`);
  }

  return 'Download complete!';
});</code-block>
    </section>

    <section>
      <h2>CSS Parts</h2>
      <p>Style internal elements using the <code>::part()</code> selector.</p>

      <table class="api-table">
        <thead>
          <tr>
            <th>Part Name</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><code>terminal</code></td><td>Main terminal container</td></tr>
          <tr><td><code>header</code></td><td>Terminal header bar</td></tr>
          <tr><td><code>controls</code></td><td>Window controls container (close, minimize, maximize)</td></tr>
          <tr><td><code>control-close</code></td><td>Close button</td></tr>
          <tr><td><code>control-minimize</code></td><td>Minimize button</td></tr>
          <tr><td><code>control-maximize</code></td><td>Maximize button</td></tr>
          <tr><td><code>title</code></td><td>Terminal title text</td></tr>
          <tr><td><code>actions</code></td><td>Actions container (theme toggle, copy)</td></tr>
          <tr><td><code>theme-button</code></td><td>Theme toggle button</td></tr>
          <tr><td><code>copy-button</code></td><td>Copy button</td></tr>
          <tr><td><code>copy-menu</code></td><td>Copy dropdown menu</td></tr>
          <tr><td><code>copy-menu-item</code></td><td>Copy menu items</td></tr>
          <tr><td><code>body</code></td><td>Terminal body (scrollable area)</td></tr>
          <tr><td><code>output</code></td><td>Output container</td></tr>
          <tr><td><code>input-line</code></td><td>Input line container</td></tr>
          <tr><td><code>prompt</code></td><td>Command prompt text</td></tr>
          <tr><td><code>input-text</code></td><td>User input text</td></tr>
          <tr><td><code>cursor</code></td><td>Cursor element</td></tr>
        </tbody>
      </table>

      <h3>Styling Example</h3>
      <code-block language="css">/* Style the terminal header */
terminal-window::part(header) {
  background: #2d2d2d;
  border-bottom: 2px solid #50fa7b;
}

/* Style the prompt */
terminal-window::part(prompt) {
  color: #ff79c6;
}</code-block>
    </section>

    <section>
      <h2>Slots</h2>
      <p>Customize content using named slots.</p>

      <table class="api-table">
        <thead>
          <tr>
            <th>Slot</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>title</code></td>
            <td>Custom content for the terminal title in the header</td>
          </tr>
          <tr>
            <td><code>actions</code></td>
            <td>Custom buttons/actions before the theme and copy buttons</td>
          </tr>
          <tr>
            <td><code>before-output</code></td>
            <td>Content inserted before the output area in the terminal body</td>
          </tr>
        </tbody>
      </table>

      <h3>Slots Example</h3>
      <code-block language="html">&lt;terminal-window&gt;
  &lt;span slot="title"&gt;My Custom Terminal&lt;/span&gt;
  &lt;button slot="actions" onclick="runScript()"&gt;Run&lt;/button&gt;
  &lt;div slot="before-output"&gt;
    &lt;p&gt;Welcome to the interactive tutorial!&lt;/p&gt;
  &lt;/div&gt;
&lt;/terminal-window&gt;</code-block>
    </section>

    <section>
      <h2>CSS Custom Properties</h2>
      <p>Customize colors and styling using CSS custom properties.</p>

      <table class="api-table">
        <thead>
          <tr>
            <th>Property</th>
            <th>Default (Dark)</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>--bg-primary</code></td>
            <td><code>#1a1a2e</code></td>
            <td>Primary background color</td>
          </tr>
          <tr>
            <td><code>--bg-secondary</code></td>
            <td><code>#16213e</code></td>
            <td>Secondary background color</td>
          </tr>
          <tr>
            <td><code>--bg-header</code></td>
            <td><code>#0f0f23</code></td>
            <td>Header background color</td>
          </tr>
          <tr>
            <td><code>--border-color</code></td>
            <td><code>#2a2a4a</code></td>
            <td>Border color</td>
          </tr>
          <tr>
            <td><code>--text-primary</code></td>
            <td><code>#e0e0e0</code></td>
            <td>Primary text color</td>
          </tr>
          <tr>
            <td><code>--text-secondary</code></td>
            <td><code>#888</code></td>
            <td>Secondary text color</td>
          </tr>
          <tr>
            <td><code>--prompt-color</code></td>
            <td><code>#50fa7b</code></td>
            <td>Prompt color</td>
          </tr>
          <tr>
            <td><code>--cursor-color</code></td>
            <td><code>#50fa7b</code></td>
            <td>Cursor color</td>
          </tr>
          <tr>
            <td><code>--command-color</code></td>
            <td><code>#f8f8f2</code></td>
            <td>Command text color</td>
          </tr>
          <tr>
            <td><code>--output-color</code></td>
            <td><code>#e0e0e0</code></td>
            <td>Output text color</td>
          </tr>
          <tr>
            <td><code>--error-color</code></td>
            <td><code>#ff5555</code></td>
            <td>Error text color</td>
          </tr>
          <tr>
            <td><code>--info-color</code></td>
            <td><code>#8be9fd</code></td>
            <td>Info text color</td>
          </tr>
          <tr>
            <td><code>--success-color</code></td>
            <td><code>#50fa7b</code></td>
            <td>Success text color</td>
          </tr>
          <tr>
            <td><code>--control-close</code></td>
            <td><code>#ff5f56</code></td>
            <td>Close button color</td>
          </tr>
          <tr>
            <td><code>--control-minimize</code></td>
            <td><code>#ffbd2e</code></td>
            <td>Minimize button color</td>
          </tr>
          <tr>
            <td><code>--control-maximize</code></td>
            <td><code>#27c93f</code></td>
            <td>Maximize button color</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="commands">
      <h2>Built-in Commands</h2>
      <p>These commands are available by default:</p>

      <table class="api-table">
        <thead>
          <tr>
            <th>Command</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>help</code></td>
            <td>Display available commands</td>
          </tr>
          <tr>
            <td><code>clear</code></td>
            <td>Clear the terminal output</td>
          </tr>
          <tr>
            <td><code>echo [text]</code></td>
            <td>Print text to the terminal</td>
          </tr>
          <tr>
            <td><code>history</code></td>
            <td>Show command history</td>
          </tr>
        </tbody>
      </table>

      <h3 id="vfs">VFS Commands</h3>
      <p>When <code>enable-vfs="true"</code> is set, these additional commands are available:</p>

      <table class="api-table">
        <thead>
          <tr>
            <th>Command</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>ls [path]</code></td>
            <td>List directory contents</td>
          </tr>
          <tr>
            <td><code>cd [path]</code></td>
            <td>Change current directory</td>
          </tr>
          <tr>
            <td><code>pwd</code></td>
            <td>Print working directory</td>
          </tr>
          <tr>
            <td><code>mkdir [name]</code></td>
            <td>Create a directory</td>
          </tr>
          <tr>
            <td><code>touch [name]</code></td>
            <td>Create an empty file</td>
          </tr>
          <tr>
            <td><code>rm [name]</code></td>
            <td>Remove a file or directory</td>
          </tr>
          <tr>
            <td><code>cat [file]</code></td>
            <td>Display file contents</td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>

  <footer class="site-footer">
    <p>&copy; 2025 Thomas A. Powell. MIT License.</p>
  </footer>

  <script type="module" src="https://cdn.jsdelivr.net/gh/ProfPowell/code-block@v2.0.1/dist/code-block.min.js"></script>
  <script>
    // Theme toggle
    const themeToggle = document.querySelector('.theme-toggle');
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark');
    }

    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });
  </script>
</body>
</html>
