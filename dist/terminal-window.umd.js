!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).TerminalWindow={})}(this,function(t){"use strict";class e{constructor(){this.ansiColors={30:"ansi-black",31:"ansi-red",32:"ansi-green",33:"ansi-yellow",34:"ansi-blue",35:"ansi-magenta",36:"ansi-cyan",37:"ansi-white",90:"ansi-bright-black",91:"ansi-bright-red",92:"ansi-bright-green",93:"ansi-bright-yellow",94:"ansi-bright-blue",95:"ansi-bright-magenta",96:"ansi-bright-cyan",97:"ansi-bright-white"},this.ansiBgColors={40:"ansi-bg-black",41:"ansi-bg-red",42:"ansi-bg-green",43:"ansi-bg-yellow",44:"ansi-bg-blue",45:"ansi-bg-magenta",46:"ansi-bg-cyan",47:"ansi-bg-white"}}parse(t,e){const n=/\x1b\[([0-9;]+)m/g;let i,s="",o=0,r=[];for(;null!==(i=n.exec(t));){if(i.index>o){const n=e(t.slice(o,i.index));r.length>0?s+=`<span class="${r.join(" ")}">${n}</span>`:s+=n}const n=i[1].split(";");for(const t of n)"0"===t?r=[]:"1"===t?r.push("ansi-bold"):"3"===t?r.push("ansi-italic"):"4"===t?r.push("ansi-underline"):this.ansiColors[t]?(r=r.filter(t=>!t.startsWith("ansi-")||t.startsWith("ansi-bg-")||t.startsWith("ansi-bold")||t.startsWith("ansi-italic")||t.startsWith("ansi-underline")),r.push(this.ansiColors[t])):this.ansiBgColors[t]&&(r=r.filter(t=>!t.startsWith("ansi-bg-")),r.push(this.ansiBgColors[t]));o=i.index+i[0].length}if(o<t.length){const n=e(t.slice(o));r.length>0?s+=`<span class="${r.join(" ")}">${n}</span>`:s+=n}return s||e(t)}}class n{constructor(){this.commands=new Map,this.aliases=new Map}register(t,e){this.commands.set(t.toLowerCase(),e)}unregister(t){this.commands.delete(t.toLowerCase())}registerAlias(t,e){this.aliases.set(t.toLowerCase(),e)}has(t){return this.commands.has(t.toLowerCase())}get(t){return this.commands.get(t.toLowerCase())}getNames(){return Array.from(this.commands.keys()).sort()}resolveAlias(t){const e=t.split(" ")[0].toLowerCase();return this.aliases.has(e)?this.aliases.get(e)+t.slice(e.length):t}parse(t){const e=[];let n="",i=!1,s="";for(let o=0;o<t.length;o++){const r=t[o];i||'"'!==r&&"'"!==r?i&&r===s?(i=!1,s=""):i||" "!==r?n+=r:n&&(e.push(n),n=""):(i=!0,s=r)}return n&&e.push(n),e}}class i{constructor(){this.history=[],this.index=-1,this.storageKey="terminal-history"}add(t){!t||this.history.length>0&&this.history[this.history.length-1]===t?this.index=this.history.length:(this.history.push(t),this.index=this.history.length,this._persist())}navigate(t){const e=this.index+t;return e<0?null:e>=this.history.length?(this.index=this.history.length,""):(this.index=e,this.history[this.index])}getHistory(){return[...this.history]}setHistory(t){Array.isArray(t)&&(this.history=t.map(t=>String(t)),this.index=this.history.length,this._persist())}clear(){this.history=[],this.index=-1,this._persist()}getFormattedHistory(){return this.history.map((t,e)=>`  ${e+1}  ${t}`).join("\n")}isEmpty(){return 0===this.history.length}setPersistence(t){this.persistenceEnabled=t,t?this._load():localStorage.removeItem(this.storageKey)}_persist(){if(this.persistenceEnabled)try{localStorage.setItem(this.storageKey,JSON.stringify(this.history))}catch(t){console.warn("Failed to save history to localStorage",t)}}_load(){try{const t=localStorage.getItem(this.storageKey);t&&(this.history=JSON.parse(t),this.index=this.history.length)}catch(t){console.warn("Failed to load history from localStorage",t)}}}class s{constructor(){this.root={type:"dir",name:"/",children:new Map,parent:null},this.cwd=this.root,this.currentPath="/",this._initDefaultStructure()}_initDefaultStructure(){this.mkdir("/home"),this.mkdir("/home/user"),this.mkdir("/bin"),this.mkdir("/etc"),this.mkdir("/tmp"),this.mkdir("/var"),this.cwd=this.resolvePathObject("/home/user"),this.currentPath="/home/user",this.writeFile("/home/user/README.md","# Welcome\n\nThis is a virtual file system.")}getcwd(){return this.currentPath}cd(t){if(!t||"~"===t)return this.cd("/home/user");const e=this.resolvePathObject(t);return e?"dir"!==e.type?`cd: ${t}: Not a directory`:(this.cwd=e,this.currentPath=this._getAbsolutePath(e),null):`cd: ${t}: No such file or directory`}ls(t="."){const e=this.resolvePathObject(t);return e?"dir"!==e.type?[e]:Array.from(e.children.values()):`ls: cannot access '${t}': No such file or directory`}mkdir(t){const e=t.substring(0,t.lastIndexOf("/"))||(t.startsWith("/")?"/":"."),n=t.split("/").pop(),i=this.resolvePathObject(e);if(!i)return`mkdir: cannot create directory '${t}': No such file or directory`;if("dir"!==i.type)return`mkdir: cannot create directory '${t}': Not a directory`;if(i.children.has(n))return`mkdir: cannot create directory '${t}': File exists`;const s={type:"dir",name:n,children:new Map,parent:i};return i.children.set(n,s),null}touch(t){const e=t.substring(0,t.lastIndexOf("/"))||(t.startsWith("/")?"/":"."),n=t.split("/").pop(),i=this.resolvePathObject(e);return i&&"dir"===i.type?(i.children.has(n)||this.writeFile(t,""),null):`touch: cannot touch '${t}': No such file or directory`}writeFile(t,e){const n=t.substring(0,t.lastIndexOf("/"))||(t.startsWith("/")?"/":"."),i=t.split("/").pop(),s=this.resolvePathObject(n);if(!s||"dir"!==s.type)return!1;const o={type:"file",name:i,content:e,parent:s,size:e.length,lastModified:new Date};return s.children.set(i,o),!0}readFile(t){const e=this.resolvePathObject(t);return e?"dir"===e.type?`cat: ${t}: Is a directory`:e.content:`cat: ${t}: No such file or directory`}rm(t,e=!1){const n=this.resolvePathObject(t);if(!n)return`rm: cannot remove '${t}': No such file or directory`;if("dir"===n.type&&!e)return`rm: cannot remove '${t}': Is a directory`;if(n===this.root)return"rm: it is dangerous to operate recursively on /";const i=n.parent;return i&&i.children.delete(n.name),null}resolvePathObject(t){if(!t||"."===t)return this.cwd;if(".."===t)return this.cwd.parent||this.root;if("/"===t)return this.root;if("~"===t)return this.resolvePathObject("/home/user");let e=t.startsWith("/")?this.root:this.cwd;const n=t.split("/").filter(t=>t&&"."!==t);for(const i of n)if(".."===i)e=e.parent||this.root;else{if("dir"!==e.type||!e.children.has(i))return null;e=e.children.get(i)}return e}_getAbsolutePath(t){if(t===this.root)return"/";const e=[];let n=t;for(;n!==this.root;)e.unshift(n.name),n=n.parent;return"/"+e.join("/")}}class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const t=new CSSStyleSheet;t.replaceSync('\n  :host {\n    display: block;\n    height: 100%;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n\n  /* Screen reader only content */\n  .sr-announcer {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n  }\n\n  /* ===== CSS Custom Properties (User Customizable) ===== */\n  .terminal {\n    /* Font settings */\n    --font-family: \'Consolas\', \'Monaco\', \'Courier New\', monospace;\n    --font-size: 14px;\n    --line-height: 1.4;\n\n    /* Cursor settings */\n    --cursor-width: 8px;\n    --cursor-height: 1.2em;\n    --cursor-blink-speed: 1s;\n  }\n\n  /* ===== DARK THEME ===== */\n  .terminal[data-theme="dark"] {\n    --bg-primary: #1a1a2e;\n    --bg-secondary: #16213e;\n    --bg-header: #0f0f23;\n    --border-color: #2a2a4a;\n    --text-primary: #e0e0e0;\n    --text-secondary: #888;\n    --text-muted: #666;\n\n    --prompt-color: #50fa7b;\n    --cursor-color: #50fa7b;\n    --command-color: #f8f8f2;\n    --output-color: #e0e0e0;\n    --error-color: #ff5555;\n    --info-color: #8be9fd;\n    --success-color: #50fa7b;\n\n    --selection-bg: rgba(80, 250, 123, 0.3);\n\n    --btn-bg: #2a2a4a;\n    --btn-hover: #3a3a5a;\n    --btn-text: #e0e0e0;\n\n    --scrollbar-track: #1a1a2e;\n    --scrollbar-thumb: #3a3a5a;\n    --scrollbar-thumb-hover: #4a4a6a;\n\n    --control-close: #ff5f56;\n    --control-minimize: #ffbd2e;\n    --control-maximize: #27c93f;\n\n    --theme-icon: "\\263E"; /* Moon */\n\n    /* ANSI colors */\n    --ansi-black: #21222c;\n    --ansi-red: #ff5555;\n    --ansi-green: #50fa7b;\n    --ansi-yellow: #f1fa8c;\n    --ansi-blue: #bd93f9;\n    --ansi-magenta: #ff79c6;\n    --ansi-cyan: #8be9fd;\n    --ansi-white: #f8f8f2;\n    --ansi-bright-black: #6272a4;\n    --ansi-bright-red: #ff6e6e;\n    --ansi-bright-green: #69ff94;\n    --ansi-bright-yellow: #ffffa5;\n    --ansi-bright-blue: #d6acff;\n    --ansi-bright-magenta: #ff92df;\n    --ansi-bright-cyan: #a4ffff;\n    --ansi-bright-white: #ffffff;\n  }\n\n  /* ===== LIGHT THEME ===== */\n  .terminal[data-theme="light"] {\n    --bg-primary: #fafafa;\n    --bg-secondary: #f0f0f0;\n    --bg-header: #e8e8e8;\n    --border-color: #d0d0d0;\n    --text-primary: #333;\n    --text-secondary: #666;\n    --text-muted: #999;\n\n    --prompt-color: #16a34a;\n    --cursor-color: #16a34a;\n    --command-color: #1a1a1a;\n    --output-color: #333;\n    --error-color: #dc2626;\n    --info-color: #0284c7;\n    --success-color: #16a34a;\n\n    --selection-bg: rgba(22, 163, 74, 0.2);\n\n    --btn-bg: #e0e0e0;\n    --btn-hover: #d0d0d0;\n    --btn-text: #333;\n\n    --scrollbar-track: #f0f0f0;\n    --scrollbar-thumb: #c0c0c0;\n    --scrollbar-thumb-hover: #a0a0a0;\n\n    --control-close: #ff5f56;\n    --control-minimize: #ffbd2e;\n    --control-maximize: #27c93f;\n\n    --theme-icon: "\\2600"; /* Sun */\n\n    /* ANSI colors (adjusted for light theme) */\n    --ansi-black: #000000;\n    --ansi-red: #c41a16;\n    --ansi-green: #007400;\n    --ansi-yellow: #826b28;\n    --ansi-blue: #0000ff;\n    --ansi-magenta: #a90d91;\n    --ansi-cyan: #318495;\n    --ansi-white: #666666;\n    --ansi-bright-black: #666666;\n    --ansi-bright-red: #eb3223;\n    --ansi-bright-green: #1cdc23;\n    --ansi-bright-yellow: #cdcd00;\n    --ansi-bright-blue: #5c5cff;\n    --ansi-bright-magenta: #eb3eb3;\n    --ansi-bright-cyan: #23cece;\n    --ansi-bright-white: #c7c7c7;\n  }\n\n  /* ANSI color classes */\n  .ansi-black { color: var(--ansi-black); }\n  .ansi-red { color: var(--ansi-red); }\n  .ansi-green { color: var(--ansi-green); }\n  .ansi-yellow { color: var(--ansi-yellow); }\n  .ansi-blue { color: var(--ansi-blue); }\n  .ansi-magenta { color: var(--ansi-magenta); }\n  .ansi-cyan { color: var(--ansi-cyan); }\n  .ansi-white { color: var(--ansi-white); }\n  .ansi-bright-black { color: var(--ansi-bright-black); }\n  .ansi-bright-red { color: var(--ansi-bright-red); }\n  .ansi-bright-green { color: var(--ansi-bright-green); }\n  .ansi-bright-yellow { color: var(--ansi-bright-yellow); }\n  .ansi-bright-blue { color: var(--ansi-bright-blue); }\n  .ansi-bright-magenta { color: var(--ansi-bright-magenta); }\n  .ansi-bright-cyan { color: var(--ansi-bright-cyan); }\n  .ansi-bright-white { color: var(--ansi-bright-white); }\n  .ansi-bold { font-weight: bold; }\n  .ansi-italic { font-style: italic; }\n  .ansi-underline { text-decoration: underline; }\n  .ansi-bg-black { background-color: var(--ansi-black); }\n  .ansi-bg-red { background-color: var(--ansi-red); }\n  .ansi-bg-green { background-color: var(--ansi-green); }\n  .ansi-bg-yellow { background-color: var(--ansi-yellow); }\n  .ansi-bg-blue { background-color: var(--ansi-blue); }\n  .ansi-bg-magenta { background-color: var(--ansi-magenta); }\n  .ansi-bg-cyan { background-color: var(--ansi-cyan); }\n  .ansi-bg-white { background-color: var(--ansi-white); }\n\n  /* ===== Terminal Container ===== */\n  .terminal {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    background: var(--bg-primary);\n    border: 1px solid var(--border-color);\n    border-radius: 8px;\n    overflow: hidden;\n    font-family: var(--font-family);\n    font-size: var(--font-size);\n    line-height: var(--line-height);\n    color: var(--text-primary);\n  }\n\n  /* Focus outline for accessibility */\n  .terminal:focus-within {\n    outline: 2px solid var(--prompt-color);\n    outline-offset: 2px;\n  }\n\n  /* ===== Terminal Header ===== */\n  .terminal-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px 16px;\n    background: var(--bg-header);\n    border-bottom: 1px solid var(--border-color);\n    user-select: none;\n  }\n\n  .window-controls {\n    display: flex;\n    gap: 8px;\n  }\n\n  .control {\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n    border: none;\n    padding: 0;\n    cursor: pointer;\n    transition: opacity 0.15s ease, transform 0.15s ease;\n  }\n\n  .control:hover {\n    opacity: 0.8;\n    transform: scale(1.1);\n  }\n\n  .control:active {\n    transform: scale(0.95);\n  }\n\n  .control.close {\n    background: var(--control-close);\n  }\n\n  .control.minimize {\n    background: var(--control-minimize);\n  }\n\n  .control.maximize {\n    background: var(--control-maximize);\n  }\n\n  .terminal-title {\n    color: var(--text-secondary);\n    font-size: 13px;\n    font-weight: 500;\n  }\n\n  .terminal-actions {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n  }\n\n  /* Slot styling */\n  ::slotted([slot="title"]) {\n    color: var(--text-secondary);\n    font-size: 13px;\n    font-weight: 500;\n  }\n\n  ::slotted([slot="actions"]) {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n  }\n\n  ::slotted([slot="before-output"]) {\n    display: block;\n    margin-bottom: 8px;\n  }\n\n  .theme-btn,\n  .copy-btn {\n    padding: 4px 10px;\n    background: var(--btn-bg);\n    color: var(--btn-text);\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 12px;\n    font-family: inherit;\n    transition: background 0.2s;\n  }\n\n  .theme-btn {\n    padding: 4px 8px;\n    font-size: 14px;\n  }\n\n  .theme-btn::before {\n    content: var(--theme-icon);\n  }\n\n  .theme-btn:hover,\n  .copy-btn:hover {\n    background: var(--btn-hover);\n  }\n\n  .theme-btn:focus,\n  .copy-btn:focus {\n    outline: 2px solid var(--prompt-color);\n    outline-offset: 2px;\n  }\n\n  /* Copy button success state */\n  .copy-btn.copy-success {\n    background: var(--success-color, #50fa7b);\n    color: var(--bg-primary);\n  }\n\n  /* Copy menu wrapper and dropdown */\n  .copy-wrapper {\n    position: relative;\n  }\n\n  .copy-menu {\n    display: none;\n    position: absolute;\n    top: 100%;\n    right: 0;\n    margin-top: 4px;\n    background: var(--bg-secondary);\n    border: 1px solid var(--border-color);\n    border-radius: 4px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n    z-index: 1000;\n    min-width: 160px;\n    overflow: hidden;\n  }\n\n  .copy-menu-item {\n    display: block;\n    width: 100%;\n    padding: 8px 12px;\n    background: transparent;\n    border: none;\n    color: var(--text-primary);\n    font-size: 12px;\n    font-family: inherit;\n    text-align: left;\n    cursor: pointer;\n    transition: background 0.15s;\n  }\n\n  .copy-menu-item:hover {\n    background: var(--btn-hover);\n  }\n\n  .copy-menu-item:focus {\n    background: var(--btn-hover);\n    outline: none;\n  }\n\n  /* ===== Terminal Body ===== */\n  .terminal-body {\n    flex: 1;\n    min-height: 0; /* Critical: allows flex item to shrink below content size */\n    padding: 16px;\n    overflow-y: auto;\n    overflow-x: hidden;\n  }\n\n  .terminal-body::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  .terminal-body::-webkit-scrollbar-track {\n    background: var(--scrollbar-track);\n  }\n\n  .terminal-body::-webkit-scrollbar-thumb {\n    background: var(--scrollbar-thumb);\n    border-radius: 4px;\n  }\n\n  .terminal-body::-webkit-scrollbar-thumb:hover {\n    background: var(--scrollbar-thumb-hover);\n  }\n\n  /* ===== Output ===== */\n  .output {\n    margin-bottom: 4px;\n  }\n\n  .output-line {\n    padding: 2px 0;\n    white-space: pre-wrap;\n    word-break: break-word;\n  }\n\n  .output-line::selection, \n  .output-line *::selection {\n    background: var(--selection-bg);\n  }\n\n  .line-command {\n    color: var(--command-color);\n  }\n\n  .line-command .line-prompt {\n    color: var(--prompt-color);\n    font-weight: bold;\n  }\n\n  .line-output {\n    color: var(--output-color);\n  }\n\n  .line-error {\n    color: var(--error-color);\n  }\n\n  .line-info {\n    color: var(--info-color);\n  }\n\n  .line-success {\n    color: var(--success-color);\n  }\n\n  /* ===== Input Line ===== */\n  .input-line {\n    display: flex;\n    align-items: center;\n  }\n\n  .terminal[data-readonly="true"] .input-line {\n    display: none;\n  }\n\n  .input-prompt {\n    color: var(--prompt-color);\n    font-weight: bold;\n    flex-shrink: 0;\n    white-space: pre;\n  }\n\n  .input-display {\n    display: flex;\n    align-items: center;\n    flex: 1;\n    min-height: 1.4em;\n  }\n\n  .input-text {\n    color: var(--command-color);\n    white-space: pre;\n  }\n\n  .hidden-input {\n    position: absolute;\n    left: -9999px;\n    opacity: 0;\n    width: 1px;\n    height: 1px;\n  }\n\n  /* ===== Cursor Styles ===== */\n  .cursor {\n    display: inline-block;\n    background: var(--cursor-color);\n    margin-left: 1px;\n  }\n\n  /* Block cursor */\n  .terminal[data-cursor-style="block"] .cursor {\n    width: var(--cursor-width);\n    height: var(--cursor-height);\n  }\n\n  /* Underline cursor */\n  .terminal[data-cursor-style="underline"] .cursor {\n    width: var(--cursor-width);\n    height: 2px;\n    align-self: flex-end;\n    margin-bottom: 3px;\n  }\n\n  /* Bar cursor */\n  .terminal[data-cursor-style="bar"] .cursor {\n    width: 2px;\n    height: var(--cursor-height);\n  }\n\n  /* Blinking cursor animation */\n  @keyframes terminal-blink {\n    0%, 49% {\n      opacity: 1;\n    }\n    50%, 100% {\n      opacity: 0;\n    }\n  }\n\n  .terminal[data-cursor-blink="true"] .cursor {\n    animation: terminal-blink var(--cursor-blink-speed) step-start infinite;\n  }\n\n  /* Typing cursor (shown during typing effect) */\n  .typing-cursor {\n    display: inline-block;\n    width: var(--cursor-width);\n    height: var(--cursor-height);\n    background: var(--cursor-color);\n    margin-left: 1px;\n    animation: terminal-blink var(--cursor-blink-speed) step-start infinite;\n  }\n\n  /* High contrast mode support */\n  @media (prefers-contrast: high) {\n    .terminal {\n      border-width: 2px;\n    }\n    .terminal:focus-within {\n      outline-width: 3px;\n    }\n  }\n\n  /* Reduced motion support */\n  @media (prefers-reduced-motion: reduce) {\n    .terminal[data-cursor-blink="true"] .cursor {\n      animation: none;\n      opacity: 1;\n    }\n    .theme-btn,\n    .copy-btn,\n    .control {\n      transition: none;\n    }\n  }\n\n  /* ===== Fullscreen Mode ===== */\n  .terminal.fullscreen {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100vw;\n    height: 100vh;\n    z-index: 99999;\n    border-radius: 0;\n    border: none;\n  }\n\n  .terminal.fullscreen .terminal-header {\n    border-radius: 0;\n  }\n'),this.shadowRoot.adoptedStyleSheets=[t],this.ansiParser=new e,this.commandRegistry=new n,this.historyManager=new i,this.fileSystem=new s,this.outputLines=[],this.currentInput="",this.inputMasked=!1,this.isFullscreen=!1,this.isMinimized=!1,this._fullscreenEscHandler=null,this._copyMenuCloseHandler=null,this._copyFeedbackTimeout=null,this._announceTimeout=null,this._copyMenuOpen=!1,this._copyMenuFocusIndex=-1,this._autoScroll=!0,this._scrollThreshold=50,this._typingInProgress=!1,this._typingCancelled=!1,this._typingQueue=[],this.config={theme:"dark",prompt:"$ ",cursorStyle:"block",cursorBlink:!0,fontFamily:"'Consolas', 'Monaco', 'Courier New', monospace",fontSize:"14px",lineHeight:"1.4",typingEffect:!1,typingSpeed:30,showHeader:!0,title:"Terminal",showControls:!0,showCopy:!0,showThemeToggle:!0,readonly:!1,maxLines:1e3,enableVfs:!1,persistHistory:!1,forceAnimations:!1},this._i18n={copy:"Copy",close:"Close",minimize:"Minimize",maximize:"Maximize",exitFullscreen:"Exit fullscreen",toggleFullscreen:"Toggle fullscreen",toggleTheme:"Toggle theme",switchToLight:"switch to light",switchToDark:"switch to dark",copyAll:"Copy All",copyCommandsOnly:"Copy Commands Only",copyOutputOnly:"Copy Output Only",copyOptions:"Copy options",copied:"Copied!",nothingToCopy:"Nothing to copy",noSelection:"No selection",terminalReady:"Terminal ready",terminalCleared:"Terminal cleared",terminalClosed:"Terminal closed",terminalMinimized:"Terminal minimized",terminalRestored:"Terminal restored",enteredFullscreen:"Entered fullscreen mode",exitedFullscreen:"Exited fullscreen mode",themeChangedTo:"Theme changed to",copiedToClipboard:"copied to clipboard",content:"Content",availableCommands:"Available commands:",noCommandsInHistory:"No commands in history.",commandNotFound:"Command not found:",typeHelpForCommands:"Type 'help' for available commands.",terminalInputLabel:"Terminal input. Type a command and press Enter.",terminalOutput:"Terminal output"},this._registerBuiltInCommands(),this.render()}connectedCallback(){this._applyAttributes(),this._setupEventListeners(),this.config.enableVfs&&this._registerVfsCommands(),this.config.readonly||this._focusInput();const t=this.getAttribute("welcome");t&&this.print(t),this._announce(this._t("terminalReady"))}disconnectedCallback(){this._fullscreenEscHandler&&(document.removeEventListener("keydown",this._fullscreenEscHandler),this._fullscreenEscHandler=null),this._copyMenuCloseHandler&&(document.removeEventListener("click",this._copyMenuCloseHandler),this._copyMenuCloseHandler=null),this._copyFeedbackTimeout&&(clearTimeout(this._copyFeedbackTimeout),this._copyFeedbackTimeout=null),this._announceTimeout&&(clearTimeout(this._announceTimeout),this._announceTimeout=null)}static get observedAttributes(){return["theme","prompt","cursor-style","cursor-blink","font-family","font-size","line-height","typing-effect","typing-speed","show-header","title","show-controls","show-copy","show-theme-toggle","readonly","max-lines","enable-vfs","persist-history","force-animations"]}attributeChangedCallback(t,e,n){if(e!==n){switch(t){case"theme":this.config.theme=n||"dark";break;case"prompt":this.config.prompt=n||"$ ";break;case"cursor-style":this.config.cursorStyle=n||"block";break;case"cursor-blink":this.config.cursorBlink="false"!==n;break;case"font-family":this.config.fontFamily=n||this.config.fontFamily;break;case"font-size":this.config.fontSize=n||"14px";break;case"line-height":this.config.lineHeight=n||"1.4";break;case"typing-effect":this.config.typingEffect="true"===n;break;case"typing-speed":this.config.typingSpeed=parseInt(n)||30;break;case"show-header":this.config.showHeader="false"!==n,this._updateHeaderVisibility();break;case"title":this.config.title=n||"Terminal",this._updateTitle();break;case"show-controls":this.config.showControls="false"!==n,this._updateControlsVisibility();break;case"show-copy":this.config.showCopy="false"!==n,this._updateCopyVisibility();break;case"show-theme-toggle":this.config.showThemeToggle="false"!==n,this._updateThemeToggleVisibility();break;case"readonly":this.config.readonly="true"===n||""===n,this._updateReadonlyState();break;case"max-lines":this.config.maxLines=parseInt(n)||1e3;break;case"enable-vfs":this.config.enableVfs="true"===n||""===n,this.config.enableVfs&&this._registerVfsCommands();break;case"persist-history":this.config.persistHistory="true"===n||""===n,this.historyManager.setPersistence(this.config.persistHistory);break;case"force-animations":this.config.forceAnimations="true"===n||""===n}this._updateStyles()}}_applyAttributes(){o.observedAttributes.forEach(t=>{const e=this.getAttribute(t);null!==e&&this.attributeChangedCallback(t,null,e)}),this._updateStyles()}_updateStyles(){const t=this.shadowRoot.querySelector(".terminal");t&&(t.dataset.theme=this.config.theme,t.dataset.cursorStyle=this.config.cursorStyle,t.dataset.cursorBlink=this.config.cursorBlink,t.dataset.readonly=this.config.readonly,t.style.setProperty("--font-family",this.config.fontFamily),t.style.setProperty("--font-size",this.config.fontSize),t.style.setProperty("--line-height",this.config.lineHeight));const e=this.shadowRoot.querySelector(".input-prompt");e&&(e.textContent=this.config.prompt)}_updateHeaderVisibility(){const t=this.shadowRoot.querySelector(".terminal-header");t&&(t.style.display=this.config.showHeader?"flex":"none")}_updateTitle(){const t=this.shadowRoot.querySelector(".terminal-title");t&&(t.textContent=this.config.title)}_updateControlsVisibility(){const t=this.shadowRoot.querySelector(".window-controls");t&&(t.style.display=this.config.showControls?"flex":"none")}_updateCopyVisibility(){const t=this.shadowRoot.querySelector(".copy-btn");t&&(t.style.display=this.config.showCopy?"inline-block":"none")}_updateThemeToggleVisibility(){const t=this.shadowRoot.querySelector(".theme-btn");t&&(t.style.display=this.config.showThemeToggle?"inline-block":"none")}_updateReadonlyState(){const t=this.shadowRoot.querySelector(".input-line");t&&(t.style.display=this.config.readonly?"none":"flex")}_registerVfsCommands(){this.registerCommand("ls",t=>{const e=this.fileSystem.ls(t[0]);if("string"==typeof e)return e;return e.map(t=>"dir"===t.type?`[1;34m${t.name}/[0m`:t.name).join("  ")}),this.registerCommand("cd",t=>{const e=this.fileSystem.cd(t[0]);return e||(this.setPrompt(`user@host:${this.fileSystem.getcwd()}$ `),null)}),this.registerCommand("pwd",()=>this.fileSystem.getcwd()),this.registerCommand("mkdir",t=>t[0]?this.fileSystem.mkdir(t[0]):"mkdir: missing operand"),this.registerCommand("touch",t=>t[0]?this.fileSystem.touch(t[0]):"touch: missing operand"),this.registerCommand("rm",t=>{if(!t[0])return"rm: missing operand";const e=t.includes("-r")||t.includes("-rf"),n=t.find(t=>!t.startsWith("-"));return n?this.fileSystem.rm(n,e):"rm: missing operand"}),this.registerCommand("cat",t=>t[0]?this.fileSystem.readFile(t[0]):"cat: missing operand")}_registerBuiltInCommands(){this.registerCommand("help",()=>{const t=this.commandRegistry.getNames();return`${this._t("availableCommands")}\n${t.map(t=>`  ${t}`).join("\n")}`}),this.registerCommand("clear",()=>(this.clear(),null)),this.registerCommand("echo",t=>t.join(" ")),this.registerCommand("history",()=>this.historyManager.isEmpty()?this._t("noCommandsInHistory"):this.historyManager.getFormattedHistory()),this.registerCommand("date",()=>(new Date).toString())}registerCommand(t,e){this.commandRegistry.register(t,e)}unregisterCommand(t){this.commandRegistry.unregister(t)}registerAlias(t,e){this.commandRegistry.registerAlias(t,e)}async executeCommand(t,e=!0){const n=t.trim();if(!n)return;e&&this.historyManager.add(n),this._printCommandLine(n);const i=this.commandRegistry.resolveAlias(n),s=this.commandRegistry.parse(i),o=s[0].toLowerCase(),r=s.slice(1),a=this.commandRegistry.get(o);if(a)try{const t=await a(r,this);null!=t&&await this.print(String(t)),this.dispatchEvent(new CustomEvent("command-result",{detail:{command:o,args:r,input:n,result:t},bubbles:!0,composed:!0}))}catch(l){await this.print(`Error: ${l.message}`,"error"),this.dispatchEvent(new CustomEvent("command-error",{detail:{command:o,args:r,input:n,error:l},bubbles:!0,composed:!0}))}else{const t=`${this._t("commandNotFound")} ${o}. ${this._t("typeHelpForCommands")}`;await this.print(t,"error"),this.dispatchEvent(new CustomEvent("command-error",{detail:{command:o,args:r,input:n,error:new Error(t)},bubbles:!0,composed:!0}))}this.dispatchEvent(new CustomEvent("command",{detail:{command:o,args:r,input:n},bubbles:!0,composed:!0}))}async executeSequence(t,e=1e3){for(const n of t){const t="string"==typeof n?n:n.command,i="string"==typeof n?e:n.delay??e;await this.executeCommand(t,!1),await this._delay(i)}}_printCommandLine(t){const e={type:"command",prompt:this.config.prompt,content:t};this.outputLines.push(e),this._appendLineToDom(e),this._trimOutputIfNeeded(),this._scrollToBottom()}async print(t,e="output"){const n=t.split("\n");for(const i of n){const t={type:e,content:i};this.outputLines.push(t),this.dispatchEvent(new CustomEvent("output",{detail:{type:e,content:i},bubbles:!0,composed:!0})),this.config.typingEffect&&"command"!==e&&!this._prefersReducedMotion()||this._appendLineToDom(t)}this.config.typingEffect&&"command"!==e&&!this._prefersReducedMotion()&&(this._typingInProgress?await new Promise(t=>{this._typingQueue.push({lines:n,type:e,resolve:t})}):(await this._renderWithTypingEffect(n,e),await this._processTypingQueue())),this._trimOutputIfNeeded(),this._scrollToBottom(),"error"===e&&this._announce(`Error: ${t}`)}_prefersReducedMotion(){return!this.config.forceAnimations&&(window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)}async _processTypingQueue(){for(;this._typingQueue.length>0;){const{lines:t,type:e,resolve:n}=this._typingQueue.shift();await this._renderWithTypingEffect(t,e),n()}}_trimOutputIfNeeded(){const t=this.shadowRoot.querySelector(".output");for(;this.outputLines.length>this.config.maxLines;)this.outputLines.shift(),t&&t.firstElementChild&&t.removeChild(t.firstElementChild)}async _renderWithTypingEffect(t,e){this._typingInProgress=!0,this._typingCancelled=!1;const n=this.shadowRoot.querySelector(".output"),i=this.shadowRoot.querySelector(".input-line .cursor");i&&(i.style.visibility="hidden");const s=document.createElement("span");s.className="typing-cursor";for(const o of t){if(this._typingCancelled){for(let n=t.indexOf(o);n<t.length;n++)this._appendLineToDom({type:e,content:t[n]});break}const i=document.createElement("div");i.className=`output-line line-${e}`,i.setAttribute("role","listitem"),n.appendChild(i);let r="";for(let t=0;t<o.length;t++){if(this._typingCancelled){i.innerHTML=this._parseAnsi(o);break}r+=o[t],i.innerHTML=this._parseAnsi(r),i.appendChild(s),this._scrollToBottom(),await this._delay(this.config.typingSpeed)}s.parentNode===i&&i.removeChild(s)}i&&(i.style.visibility="visible"),this._typingInProgress=!1,this._typingCancelled=!1}skipTypingEffect(){this._typingInProgress&&(this._typingCancelled=!0)}_delay(t){return new Promise(e=>setTimeout(e,t))}clear(){this.outputLines=[];const t=this.shadowRoot.querySelector(".output");t&&(t.innerHTML=""),this._announce(this._t("terminalCleared"))}_parseAnsi(t){return this.ansiParser.parse(t,this._escapeHtml.bind(this))}_appendLineToDom(t){const e=this.shadowRoot.querySelector(".output");if(!e)return;const n=document.createElement("div");"command"===t.type?(n.className="output-line line-command",n.setAttribute("role","listitem"),n.innerHTML=`<span class="line-prompt">${this._escapeHtml(t.prompt)}</span>${this._escapeHtml(t.content)}`):(n.className=`output-line line-${t.type}`,n.setAttribute("role","listitem"),n.innerHTML=this._parseAnsi(t.content)),e.appendChild(n)}_renderOutput(){const t=this.shadowRoot.querySelector(".output");t&&(t.innerHTML="",this.outputLines.forEach(t=>{this._appendLineToDom(t)}),this._scrollToBottom())}_isNearBottom(){const t=this.shadowRoot.querySelector(".terminal-body");if(!t)return!0;return t.scrollHeight-t.scrollTop-t.clientHeight<=this._scrollThreshold}_handleScroll(){this._autoScroll=this._isNearBottom()}_scrollToBottom(){if(!this._autoScroll)return;const t=this.shadowRoot.querySelector(".terminal-body");t&&(t.scrollTop=t.scrollHeight)}scrollToBottom(){this._autoScroll=!0;const t=this.shadowRoot.querySelector(".terminal-body");t&&(t.scrollTop=t.scrollHeight)}_escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}_announce(t){const e=this.shadowRoot.querySelector(".sr-announcer");e&&(e.textContent=t,this._announceTimeout&&clearTimeout(this._announceTimeout),this._announceTimeout=setTimeout(()=>{e.textContent="",this._announceTimeout=null},1e3))}_setupEventListeners(){const t=this.shadowRoot.querySelector(".hidden-input"),e=this.shadowRoot.querySelector(".terminal"),n=this.shadowRoot.querySelector(".terminal-body");n&&n.addEventListener("scroll",()=>this._handleScroll()),e.addEventListener("click",()=>{if(this._typingInProgress&&this.skipTypingEffect(),!this.config.readonly){const t=this.shadowRoot.getSelection?this.shadowRoot.getSelection():window.getSelection();t&&t.toString().length>0||this._focusInput()}}),t.addEventListener("input",t=>{this.currentInput=t.target.value,this._updateInputDisplay()}),t.addEventListener("keydown",e=>{if(!this.config.readonly)switch(e.key){case"Enter":e.preventDefault();const n=this.currentInput;this.currentInput="",t.value="",this._updateInputDisplay(),this.executeCommand(n);break;case"ArrowUp":e.preventDefault(),this._navigateHistory(-1);break;case"ArrowDown":e.preventDefault(),this._navigateHistory(1);break;case"Tab":e.preventDefault(),this._autocomplete();break;case"c":e.ctrlKey&&(e.preventDefault(),this._typingInProgress?this.skipTypingEffect():(this._printCommandLine(this.currentInput+"^C"),this.currentInput="",t.value="",this._updateInputDisplay()),this.dispatchEvent(new CustomEvent("interrupt",{bubbles:!0,composed:!0})));break;case"l":e.ctrlKey&&(e.preventDefault(),this.clear())}});const i=this.shadowRoot.querySelector(".copy-btn"),s=this.shadowRoot.querySelector(".copy-menu");i&&s&&(i.addEventListener("click",t=>{1===t.detail&&this.copyContent("all")}),i.addEventListener("contextmenu",t=>{t.preventDefault(),this._toggleCopyMenu()}),i.addEventListener("keydown",t=>{"Enter"===t.key||" "===t.key||"ArrowDown"===t.key&&(t.preventDefault(),this._openCopyMenu())}),s.querySelectorAll(".copy-menu-item").forEach(t=>{t.addEventListener("click",e=>{e.stopPropagation();const n=t.dataset.copyMode;this.copyContent(n),this._closeCopyMenu()}),t.addEventListener("keydown",e=>{if("Enter"===e.key||" "===e.key){e.preventDefault();const n=t.dataset.copyMode;this.copyContent(n),this._closeCopyMenu()}else this._handleCopyMenuKeydown(e)})}));const o=this.shadowRoot.querySelector(".theme-btn");o&&o.addEventListener("click",()=>this.toggleTheme());const r=this.shadowRoot.querySelector(".control.close"),a=this.shadowRoot.querySelector(".control.minimize"),l=this.shadowRoot.querySelector(".control.maximize");r&&r.addEventListener("click",t=>{t.stopPropagation(),this.close()}),a&&a.addEventListener("click",t=>{t.stopPropagation(),this.minimize()}),l&&l.addEventListener("click",t=>{t.stopPropagation(),this.toggleFullscreen()})}_navigateHistory(t){const e=this.historyManager.navigate(t);if(null!==e){this.currentInput=e;this.shadowRoot.querySelector(".hidden-input").value=this.currentInput,this._updateInputDisplay()}}_autocomplete(){const t=this.currentInput.split(" "),e=t[0].toLowerCase();if(1===t.length&&e){const t=this.commandRegistry.getNames().filter(t=>t.startsWith(e));if(1===t.length){this.currentInput=t[0];this.shadowRoot.querySelector(".hidden-input").value=this.currentInput,this._updateInputDisplay()}else t.length>1&&this.print(t.join("  "),"info")}}_updateInputDisplay(){const t=this.shadowRoot.querySelector(".input-text");t&&(this.inputMasked?t.textContent="*".repeat(this.currentInput.length):t.textContent=this.currentInput)}_focusInput(){const t=this.shadowRoot.querySelector(".hidden-input");t&&!this.config.readonly&&t.focus()}setInputMask(t){this.inputMasked=t,this._updateInputDisplay()}async copyContent(t="all"){let e;switch(t){case"commands":e=this.outputLines.filter(t=>"command"===t.type).map(t=>t.content).join("\n");break;case"output":e=this.outputLines.filter(t=>"command"!==t.type).map(t=>t.content).join("\n");break;case"selection":const t=this.shadowRoot.getSelection?this.shadowRoot.getSelection():window.getSelection();if(e=t?t.toString():"",!e)return void this._showCopyFeedback(this._t("noSelection"));break;default:e=this.outputLines.map(t=>"command"===t.type?`${t.prompt}${t.content}`:t.content).join("\n")}e?await this._copyToClipboard(e,t):this._showCopyFeedback(this._t("nothingToCopy"))}async _copyToClipboard(t,e="all"){const n=`${"all"===e?this._t("content"):e.charAt(0).toUpperCase()+e.slice(1)} ${this._t("copiedToClipboard")}`;try{await navigator.clipboard.writeText(t),this._showCopyFeedback(this._t("copied")),this._announce(n)}catch(i){const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this._showCopyFeedback(this._t("copied")),this._announce(n)}this.dispatchEvent(new CustomEvent("copy",{detail:{text:t,mode:e},bubbles:!0,composed:!0}))}_toggleCopyMenu(){this._copyMenuOpen?this._closeCopyMenu():this._openCopyMenu()}_openCopyMenu(){const t=this.shadowRoot.querySelector(".copy-menu"),e=this.shadowRoot.querySelector(".copy-btn");if(!t)return;t.style.display="block",this._copyMenuOpen=!0,this._copyMenuFocusIndex=0,e&&e.setAttribute("aria-expanded","true");const n=t.querySelectorAll(".copy-menu-item");n.length>0&&n[0].focus(),this._copyMenuCloseHandler=n=>{n.composedPath().includes(t)||n.composedPath().includes(e)||this._closeCopyMenu()},setTimeout(()=>document.addEventListener("click",this._copyMenuCloseHandler),0)}_closeCopyMenu(){const t=this.shadowRoot.querySelector(".copy-menu"),e=this.shadowRoot.querySelector(".copy-btn");t&&(t.style.display="none"),this._copyMenuOpen=!1,this._copyMenuFocusIndex=-1,e&&(e.setAttribute("aria-expanded","false"),e.focus()),this._copyMenuCloseHandler&&(document.removeEventListener("click",this._copyMenuCloseHandler),this._copyMenuCloseHandler=null)}_handleCopyMenuKeydown(t){const e=this.shadowRoot.querySelector(".copy-menu");if(!e||!this._copyMenuOpen)return;const n=e.querySelectorAll(".copy-menu-item");if(0!==n.length)switch(t.key){case"ArrowDown":t.preventDefault(),this._copyMenuFocusIndex=(this._copyMenuFocusIndex+1)%n.length,n[this._copyMenuFocusIndex].focus();break;case"ArrowUp":t.preventDefault(),this._copyMenuFocusIndex=(this._copyMenuFocusIndex-1+n.length)%n.length,n[this._copyMenuFocusIndex].focus();break;case"Escape":t.preventDefault(),this._closeCopyMenu();break;case"Tab":this._closeCopyMenu();break;case"Home":t.preventDefault(),this._copyMenuFocusIndex=0,n[0].focus();break;case"End":t.preventDefault(),this._copyMenuFocusIndex=n.length-1,n[n.length-1].focus()}}_showCopyFeedback(t){const e=this.shadowRoot.querySelector(".copy-btn");if(!e)return;const n=e.textContent;e.textContent=t,e.classList.add("copy-success"),this._copyFeedbackTimeout&&clearTimeout(this._copyFeedbackTimeout),this._copyFeedbackTimeout=setTimeout(()=>{e.textContent=n,e.classList.remove("copy-success"),this._copyFeedbackTimeout=null,this._focusInput()},1500)}toggleTheme(){this.config.theme="dark"===this.config.theme?"light":"dark",this.setAttribute("theme",this.config.theme),this._updateStyles(),this._announce(`${this._t("themeChangedTo")} ${this.config.theme}`),this._focusInput()}close(){this.style.display="none",this._announce(this._t("terminalClosed")),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,composed:!0}))}minimize(){this.isMinimized=!this.isMinimized;const t=this.shadowRoot.querySelector(".terminal-body");t&&(t.style.display=this.isMinimized?"none":"block"),this._announce(this.isMinimized?this._t("terminalMinimized"):this._t("terminalRestored")),this.dispatchEvent(new CustomEvent("minimize",{detail:{minimized:this.isMinimized},bubbles:!0,composed:!0})),this.isMinimized||this._focusInput()}toggleFullscreen(){this.isFullscreen=!this.isFullscreen;const t=this.shadowRoot.querySelector(".terminal"),e=this.shadowRoot.querySelector(".control.maximize");t&&t.classList.toggle("fullscreen",this.isFullscreen),e&&(e.title=this.isFullscreen?this._t("exitFullscreen"):this._t("maximize"),e.setAttribute("aria-label",this.isFullscreen?this._t("exitFullscreen"):this._t("toggleFullscreen")),e.setAttribute("aria-pressed",this.isFullscreen?"true":"false")),this.isFullscreen?(this._fullscreenEscHandler=t=>{"Escape"===t.key&&this.toggleFullscreen()},document.addEventListener("keydown",this._fullscreenEscHandler)):this._fullscreenEscHandler&&(document.removeEventListener("keydown",this._fullscreenEscHandler),this._fullscreenEscHandler=null),this._announce(this.isFullscreen?this._t("enteredFullscreen"):this._t("exitedFullscreen")),this.dispatchEvent(new CustomEvent("fullscreen",{detail:{fullscreen:this.isFullscreen},bubbles:!0,composed:!0})),this._focusInput()}setTheme(t){this.config.theme=t,this.setAttribute("theme",t),this._updateStyles()}setPrompt(t){this.config.prompt=t,this.setAttribute("prompt",t),this._updateStyles()}setCursorStyle(t){this.config.cursorStyle=t,this.setAttribute("cursor-style",t),this._updateStyles()}setCursorBlink(t){this.config.cursorBlink=t,this.setAttribute("cursor-blink",String(t)),this._updateStyles()}setTypingEffect(t,e=30){this.config.typingEffect=t,this.config.typingSpeed=e,this.setAttribute("typing-effect",String(t)),this.setAttribute("typing-speed",String(e))}setReadonly(t){this.config.readonly=t,this.setAttribute("readonly",String(t)),this._updateReadonlyState()}setForceAnimations(t){this.config.forceAnimations=t,this.setAttribute("force-animations",String(t))}hasReducedMotion(){return window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}setI18n(t){t&&"object"==typeof t&&(this._i18n={...this._i18n,...t},this.render(),this._setupEventListeners(),this._applyAttributes())}getI18n(){return{...this._i18n}}_t(t){return this._i18n[t]||t}getHistory(){return this.historyManager.getHistory()}setHistory(t){this.historyManager.setHistory(t)}clearHistory(){this.historyManager.clear()}getContent(){return this.outputLines.map(t=>"command"===t.type?`${t.prompt}${t.content}`:t.content).join("\n")}focus(){this._focusInput()}render(){this.shadowRoot.innerHTML=`\n      <div class="terminal"\n           data-theme="${this.config.theme}"\n           data-cursor-style="${this.config.cursorStyle}"\n           data-cursor-blink="${this.config.cursorBlink}"\n           data-readonly="${this.config.readonly}"\n           role="application"\n           aria-label="Terminal emulator">\n\n        \x3c!-- Screen reader announcements --\x3e\n        <div class="sr-announcer" role="status" aria-live="polite" aria-atomic="true"></div>\n\n        <div class="terminal-header" style="${this.config.showHeader?"":"display: none"}">\n          <div class="window-controls" style="${this.config.showControls?"":"display: none"}">\n            <button class="control close" title="${this._t("close")}" aria-label="${this._t("close")} terminal"></button>\n            <button class="control minimize" title="${this._t("minimize")}" aria-label="${this._t("minimize")} terminal"></button>\n            <button class="control maximize" title="${this._t("maximize")}" aria-label="${this._t("toggleFullscreen")}" aria-pressed="false"></button>\n          </div>\n          <div class="terminal-title">\n            <slot name="title">${this._escapeHtml(this.config.title)}</slot>\n          </div>\n          <div class="terminal-actions">\n            <slot name="actions"></slot>\n            <button class="theme-btn"\n                    title="${this._t("toggleTheme")} (${"dark"===this.config.theme?this._t("switchToLight"):this._t("switchToDark")})"\n                    aria-label="${this._t("toggleTheme")}"\n                    style="${this.config.showThemeToggle?"":"display: none"}">\n              <span class="theme-icon"></span>\n            </button>\n            <div class="copy-wrapper" style="${this.config.showCopy?"":"display: none"}">\n              <button class="copy-btn"\n                      title="${this._t("copy")} (right-click for options)"\n                      aria-label="${this._t("copy")} terminal content"\n                      aria-haspopup="menu"\n                      aria-expanded="false">${this._t("copy")}</button>\n              <div class="copy-menu" role="menu" aria-label="${this._t("copyOptions")}">\n                <button class="copy-menu-item" data-copy-mode="all" role="menuitem" tabindex="-1">${this._t("copyAll")}</button>\n                <button class="copy-menu-item" data-copy-mode="commands" role="menuitem" tabindex="-1">${this._t("copyCommandsOnly")}</button>\n                <button class="copy-menu-item" data-copy-mode="output" role="menuitem" tabindex="-1">${this._t("copyOutputOnly")}</button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="terminal-body" role="log" aria-live="polite" aria-relevant="additions">\n          <slot name="before-output"></slot>\n          <div class="output" role="list" aria-label="${this._t("terminalOutput")}"></div>\n          <div class="input-line" style="${this.config.readonly?"display: none":""}">\n            <span class="input-prompt" aria-hidden="true">${this._escapeHtml(this.config.prompt)}</span>\n            <span class="input-display">\n              <span class="input-text"></span>\n              <span class="cursor" aria-hidden="true"></span>\n            </span>\n            <input type="text"\n                   class="hidden-input"\n                   autocomplete="off"\n                   autocorrect="off"\n                   autocapitalize="off"\n                   spellcheck="false"\n                   aria-label="${this._t("terminalInputLabel")}"\n                   role="textbox" />\n          </div>\n        </div>\n      </div>\n    `}}customElements.get("terminal-window")||customElements.define("terminal-window",o),t.default=o,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=terminal-window.umd.js.map
